(function(){var e={4262:function(e,t,n){"use strict";var o=n(144),a=n(5130),r=n(6768),s=n(3944),i={__name:"App",setup(e){const t="6d0aa69b5d0a1041cec9148d64329921",n=[{chainId:97,name:"BNB Testnet",currency:"ETH",explorerUrl:"https://testnet.bscscan.com",rpcUrl:"https://data-seed-prebsc-1-s1.binance.org:8545"},{chainId:1,name:"Ethereum",currency:"ETH",explorerUrl:"https://etherscan.io",rpcUrl:"https://cloudflare-eth.com"}],o={name:"My Website",description:"My Website description",url:"https://zhouyucheng90.github.io",icons:["https://www.triplec.cc/wp-content/uploads/2024/06/1-1-1-300x112.png"]},a=(0,s.sb)({metadata:o,enableEIP6963:!0,enableInjected:!1,enableCoinbase:!0,rpcUrl:"...",defaultChainId:1});(0,s.Pg)({ethersConfig:a,chains:n,projectId:t,enableAnalytics:!0,enableOnramp:!0,featuredWalletIds:["c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96","e7c4d26541a7fd84dbdfa9922d3ad21e936e13a7a0e44385d44f006139e44d3b","4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0","971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709","20459438007b75f4f4acb98bf29aa3b800550309646d375da5fd4aac6c2a2c66","38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662"]});return(e,t)=>{const n=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(n)}}};const c=i;var u=c,d=n(1387),l=n(4232);const p=e=>((0,r.Qi)("data-v-9bc9b90c"),e=e(),(0,r.jt)(),e),f={class:"mobiletransactions overflowyauto"},b={class:"inner"},h=p((()=>(0,r.Lk)("div",{class:"logo"},null,-1))),m=p((()=>(0,r.Lk)("div",{class:"title"},"Wallect Connecting",-1))),y={class:"user-info"},g=p((()=>(0,r.Lk)("button",null,[(0,r.eW)("📦B"),(0,r.Lk)("span",null,"2"),(0,r.eW)(" Network")],-1)));function v(e,t,n,o,a,s){return(0,r.uX)(),(0,r.CE)("div",f,[(0,r.Lk)("div",b,[h,m,(0,r.Lk)("div",y,[g,(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>s.getMySign())},"💼"+(0,l.v_)(a.showAddress?a.showAddress:"Connect"),1)])])])}var w=n(7325),T=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"tokenAddress","type":"address"},{"indexed":false,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"balance","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"DebugLog","type":"event"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"season","type":"uint256"},{"components":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"internalType":"struct RewardDistributor.ReceiverInfo[]","name":"receiverInfos","type":"tuple[]"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"uniqueId","type":"uint256"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"distribute","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"internalType":"struct RewardDistributor.ReceiverInfo[]","name":"receiverInfos","type":"tuple[]"}],"name":"receiverInfosToString","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"_signer","type":"address"}],"name":"setSinger","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"signer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]');const k="https://portal-beta-api.triplec.cc";function A(e,t){const n=localStorage.getItem("token"),o=Object.entries(t).map((([e,t])=>""!==t?{[e]:t}:"")).filter(Boolean);let a={};return o.forEach((e=>{a={...a,...e}})),fetch(`${k}${e}`,{method:"POST",headers:{"Content-Type":"application/json","x-token":n??""},body:JSON.stringify(a)}).then((e=>200===e.status?e.json().then((e=>(0===e.code||0!=e.code&&I(e.msg),e))):500===e.status?e.json().then((e=>{if(500===e.code)switch(e.msg){case"Invalid Token":window.localStorage.clear(),window.location.reload();break;default:return{code:e.code,msg:e.msg}}})):void 0))}async function I(e){if(e.indexOf("Token")>-1||e.indexOf("token")>-1||e.indexOf("未登录或非法访问")>-1||e.indexOf("record not found")>-1){window.localStorage.clear();const e=Telegram.WebApp.initData||"";e&&A("/tguser/login",{initData:e}).then((e=>{0===e.code&&(localStorage.setItem("token",e.data.token),localStorage.setItem("userAddress",e.data.user.nickName),localStorage.setItem("phone",e.data.user.phone),localStorage.setItem("userName",e.data.user.userName),localStorage.setItem("user",JSON.stringify(e.data.user)),window.location.reload())})).catch((e=>{console.log(e)}))}}var S=n(7938),O=n(5319);function j(){const e=window.navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e);return t}const P="0x98f564dd002b3712eb294ddcfd1c23eaa2bdb9bb";var x={name:"MobileTransactions",components:{},data(){return{isMobileDevice:j(),userAddress:localStorage.getItem("userAddress"),token:this.$route.query.token||"",showAddress:localStorage.getItem("userAddress")}},mounted(){this.token&&(localStorage.setItem("token",this.token),this.getMySign()),this.showAddress&&(this.showAddress=this.truncateString(this.userAddress))},methods:{async getMySign(){if(!this.token)return!1;const e=this;try{const t=await this.initAccounts();console.log(t),t&&A("/distribution/claimReward",{seasonId:1,userAddress:t}).then((n=>{if(0===n.code){const{seasonId:o,reward_list:a,unique_id:r,sign:s}=n.data;if(a&&a.length>0){const n=e.rewardList(a);o&&n.length>0&&t&&r&&s&&e.userClaimTransaction(o,n,t,r,s)}}})).catch((e=>{console.log(e)}))}catch(t){console.log(t)}},rewardList(e){const t=new w.Ay$(window.ethereum);return e.map((e=>{const n=t.utils.toWei(e.amount,"ether");return[e.tokenAddress,n]}))},initializeGame(){console.log("initialize game")},itemTypeFn(e){this.itemType=e},async initAccounts(){try{const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e.length>0)return this.userAddress=e[0],e[0]}catch(e){}},async userClaimTransaction(e,t,n,o,a){const r=new w.Ay$(window.ethereum),s=new r.eth.Contract(T,P);console.log(s);try{await s.methods.distribute(e,t,n,o,a).send({from:n,gas:5e5}).on("receipt",(e=>{console.log("Transaction receipt:",e),"3n"===e.type&&this.userPaid(!0,e.transactionHash,o)})).on("error",(e=>{}))}catch(i){console.error("Error calling distribute:",i);const e=i?.receipt?.transactionHash||null;this.userPaid(!1,e,o)}},async gosendTransaction(e,t,n,o,a){const r=new w.Ay$(window.ethereum),s=new r.eth.Contract(T,P),i=await r.eth.getGasPrice();try{const c={gasPrice:i,gas:"500000",from:n,to:P,data:s.methods.distribute(e,t,n,o,a).encodeABI()};console.log(c),r.eth.sendTransaction(c).on("transactionHash",(function(e){console.log(e)})).on("receipt",(function(e){console.log(e)})).on("confirmation",(function(e,t){console.log(e,t)})).on("error",(function(e){console.log(e)}))}catch(c){console.error("Error:",c)}},async getContract(e,t,n,o,a){const r="0x98f564dd002b3712eb294ddcfd1c23eaa2bdb9bb",{walletProvider:i,walletProviderType:c}=(0,s.ff)(),{address:u,chainId:d,isConnected:l}=(0,s.Pu)();if(l&&u.value&&i.value){const n=new S.k(i.value),s=await n.getSigner(),c=new O.NZ(r,T,s);try{console.log(u.value);const n=await c.distribute(e,t,u.value,o,a);console.log("Transaction hash:",n.hash);const r=await n.wait();console.log("Transaction receipt:",r)}catch(p){console.error("Error calling distribute:",p)}}else{console.log("Not connected");const e=(0,s.o1)();e.open()}},async userPaid(e,t,n){const o=await A("/distribution/userPaid",{is_success:e,tx_hash:t,unique_id:n});0===o.code&&console.log("userPaid success",o.data)},truncateString(e){const t=e.substring(0,5),n=e.substring(e.length-4);return`${t}....${n}`}}},C=n(1241);const M=(0,C.A)(x,[["render",v],["__scopeId","data-v-9bc9b90c"]]);var E=M;const _=[{path:"/",name:"MobileTransactions",component:E}],N=(0,d.aE)({history:(0,d.Bt)(),routes:_});var L=N,B=n(782),W=(0,B.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),$=n(9309),q=n.n($);const D=(0,o.Kh)({myGlobalVar:1}),H=(0,a.Ef)(u);H.provide("globalVars",D),H.use(W).use(L).use(q(),{position:"top"}).mount("#app")},9432:function(){},5340:function(){},9838:function(){}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],r=e[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{191:"a2fddc9c",411:"e3e37902",558:"e143b5df"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="jump-vue:";n.l=function(o,a,r,s){if(e[o])e[o].push(a);else{var i,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==t+r){i=l;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[a];var p=function(t,n){i.onerror=i.onload=null,clearTimeout(f);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p=""}(),function(){var e={524:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var s=n.p+n.u(t),i=new Error,c=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,a[1](i)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],i=o[1],c=o[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var d=c(n)}for(t&&t(o);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},o=self["webpackChunkjump_vue"]=self["webpackChunkjump_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(4262)}));o=n.O(o)})();
//# sourceMappingURL=app.ba2a3f60.js.map